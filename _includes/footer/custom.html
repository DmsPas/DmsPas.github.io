<!-- start custom footer snippets -->
<a href="/sitemap/">Sitemap</a>
<!-- end custom footer snippets -->

<!-- Graph background animation -->
<canvas id="graph-bg"></canvas>
<style>
    #graph-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: -1;
        pointer-events: none;
        opacity: 0.18;
    }
</style>

<script>
    (function () {
        var canvas = document.getElementById('graph-bg');
        if (!canvas) return;
        var ctx = canvas.getContext('2d');
        var W = 0, H = 0;
        var nodes = [];
        var inited = false;

        var clusterDefs = [
            { cx: 0.20, cy: 0.25, color: '#2196a8' },
            { cx: 0.75, cy: 0.20, color: '#6a5acd' },
            { cx: 0.55, cy: 0.72, color: '#2a9d6e' },
            { cx: 0.18, cy: 0.75, color: '#c0762a' }
        ];

        var NUM_NODES = 260;
        var MAX_DIST = 760;
        var CLUSTER_F = 0.001;
        var NOISE = 0.08;
        var SPEED_CAP = 0.15;

        function resize() {
            W = window.innerWidth || document.documentElement.clientWidth || 1200;
            H = window.innerHeight || document.documentElement.clientHeight || 800;
            canvas.width = W;
            canvas.height = H;
        }

        function initNodes() {
            nodes = [];
            var min_node_size = 10;
            for (var i = 0; i < NUM_NODES; i++) {
                var cl = clusterDefs[i % clusterDefs.length];
                nodes.push({
                    x: cl.cx * W + (Math.random() - 0.5) * 320,
                    y: cl.cy * H + (Math.random() - 0.5) * 220,
                    vx: (Math.random() - 0.5) * 0.6,
                    vy: (Math.random() - 0.5) * 0.6,
                    r: min_node_size + Math.random() * 2,
                    cluster: i % clusterDefs.length
                });
            }
        }

        function clamp(v, lo, hi) { return Math.max(lo, Math.min(hi, v)); }

        function step() {
            for (var i = 0; i < nodes.length; i++) {
                var n = nodes[i];
                var cl = clusterDefs[n.cluster];
                n.vx += CLUSTER_F * (cl.cx * W - n.x) + (Math.random() - 0.5) * NOISE;
                n.vy += CLUSTER_F * (cl.cy * H - n.y) + (Math.random() - 0.5) * NOISE;
                n.vx = clamp(n.vx, -SPEED_CAP, SPEED_CAP);
                n.vy = clamp(n.vy, -SPEED_CAP, SPEED_CAP);
                n.x += n.vx;
                n.y += n.vy;
                if (n.x < 0) { n.x = 0; n.vx *= -0.5; }
                if (n.x > W) { n.x = W; n.vx *= -0.5; }
                if (n.y < 0) { n.y = 0; n.vy *= -0.5; }
                if (n.y > H) { n.y = H; n.vy *= -0.5; }
            }
        }

        function draw() {
            ctx.clearRect(0, 0, W, H);
            for (var i = 0; i < nodes.length; i++) {
                for (var j = i + 1; j < nodes.length; j++) {
                    var a = nodes[i], b = nodes[j];
                    var dx = a.x - b.x, dy = a.y - b.y;
                    var d = Math.sqrt(dx * dx + dy * dy);
                    if (d < MAX_DIST) {
                        ctx.strokeStyle = (a.cluster === b.cluster) ? clusterDefs[a.cluster].color : '#888';
                        ctx.globalAlpha = (1 - d / MAX_DIST) * 0.65;
                        ctx.lineWidth = 0.8;
                        ctx.beginPath();
                        ctx.moveTo(a.x, a.y);
                        ctx.lineTo(b.x, b.y);
                        ctx.stroke();
                    }
                }
            }
            ctx.globalAlpha = 1;
            for (var i = 0; i < nodes.length; i++) {
                var n = nodes[i];
                ctx.beginPath();
                ctx.arc(n.x, n.y, n.r, 0, Math.PI * 2);
                ctx.fillStyle = clusterDefs[n.cluster].color;
                ctx.fill();
            }
        }

        function loop() {
            if (!inited) {
                resize();
                if (W > 0 && H > 0) { initNodes(); inited = true; }
            }
            if (inited) { step(); draw(); }
            requestAnimationFrame(loop);
        }

        window.addEventListener('resize', function () {
            resize();
            for (var i = 0; i < nodes.length; i++) {
                nodes[i].x = clamp(nodes[i].x, 0, W);
                nodes[i].y = clamp(nodes[i].y, 0, H);
            }
        });

        loop();
    })();
</script>